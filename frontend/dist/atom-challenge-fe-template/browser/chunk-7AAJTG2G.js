import{A,B as Ee,D as L,E as ze,F as Re,G as Te,H as Ae,I as Le,J as Ve,K as Be,L as Ue,M as qe,N as V,O as B,a as j,b as Ie,e as _e,h as Oe,k as N,m as F,n as Ne,o as Fe,p as k,q as ke,r as Pe,s as P,w as E,x as z,y as R,z as T}from"./chunk-62E4AKCM.js";import{$b as xe,Ab as ve,Cb as I,Db as _,Eb as O,Gb as v,Hb as ye,Ib as Ce,Ma as ce,Oa as d,Pa as l,Qb as Me,R as ie,V as h,W as ne,Y as oe,_ as C,_b as Se,a as J,b as K,bb as M,ca as b,cc as we,da as re,eb as m,fa as ae,fb as S,hb as pe,i as $,j as ee,jb as a,jc as je,kb as c,kc as W,la as se,lb as y,ma as H,mb as de,mc as D,na as G,nc as De,oc as Q,pb as x,rb as w,sb as me,tb as ue,ua as le,vb as fe,wb as ge,xb as he,y as te,yb as be,zb as u}from"./chunk-Z5CH4HVC.js";var Ze=["overlay"],Ye=["*"];function Je(n,e){n&1&&y(0,"div")}function Ke(n,e){if(n&1&&(a(0,"div"),M(1,Je,1,0,"div",6),c()),n&2){let p=w(2);pe(p.spinner.class),S("color",p.spinner.color),d(),m("ngForOf",p.spinner.divArray)}}function $e(n,e){if(n&1&&(y(0,"div",7),ye(1,"safeHtml")),n&2){let p=w(2);m("innerHTML",Ce(1,1,p.template),ce)}}function et(n,e){if(n&1&&(a(0,"div",2,0),M(2,Ke,2,5,"div",3)(3,$e,2,3,"div",4),a(4,"div",5),ue(5),c()()),n&2){let p=w();S("background-color",p.spinner.bdColor)("z-index",p.spinner.zIndex)("position",p.spinner.fullScreen?"fixed":"absolute"),m("@.disabled",p.disableAnimation)("@fadeIn","in"),d(2),m("ngIf",!p.template),d(),m("ngIf",p.template),d(),S("z-index",p.spinner.zIndex)}}var tt={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},X={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},Z="primary",g=class n{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new n(e)}},Y=(()=>{let e=class e{constructor(){this.spinnerObservable=new ee(null)}getSpinner(i){return this.spinnerObservable.asObservable().pipe(te(t=>t&&t.name===i))}show(i=Z,t){return new Promise((o,r)=>{setTimeout(()=>{t&&Object.keys(t).length?(t.name=i,this.spinnerObservable.next(new g(K(J({},t),{show:!0}))),o(!0)):(this.spinnerObservable.next(new g({name:i,show:!0})),o(!0))},10)})}hide(i=Z,t=10){return new Promise((o,r)=>{setTimeout(()=>{this.spinnerObservable.next(new g({name:i,show:!1})),o(!0)},t)})}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),He=new oe("NGX_SPINNER_CONFIG"),it=(()=>{let e=class e{constructor(i){this._sanitizer=i}transform(i){if(i)return this._sanitizer.bypassSecurityTrustHtml(i)}};e.\u0275fac=function(t){return new(t||e)(l(_e,16))},e.\u0275pipe=ae({name:"safeHtml",type:e,pure:!0,standalone:!0});let n=e;return n})(),Ge=(()=>{let e=class e{constructor(i,t,o,r){this.spinnerService=i,this.changeDetector=t,this.elementRef=o,this.globalConfig=r,this.disableAnimation=!1,this.spinner=new g,this.ngUnsubscribe=new $,this.setDefaultOptions=()=>{let{type:s}=this.globalConfig??{};this.spinner=g.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??s,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=X.BD_COLOR,this.zIndex=X.Z_INDEX,this.color=X.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=Z,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(ie(this.ngUnsubscribe)).subscribe(i=>{this.setDefaultOptions(),Object.assign(this.spinner,i),i.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(i){return i===this.elementRef.nativeElement.parentElement?!0:i.parentNode&&this.isSpinnerZone(i.parentNode)}ngOnChanges(i){for(let t in i)if(t){let o=i[t];if(o.isFirstChange())return;typeof o.currentValue<"u"&&o.currentValue!==o.previousValue&&o.currentValue!==""&&(this.spinner[t]=o.currentValue,t==="showSpinner"&&(o.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),t==="name"&&this.initObservable())}}getClass(i,t){this.spinner.divCount=tt[i],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((r,s)=>s);let o="";switch(t.toLowerCase()){case"small":o="la-sm";break;case"medium":o="la-2x";break;case"large":o="la-3x";break;default:break}return"la-"+i+" "+o}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}};e.\u0275fac=function(t){return new(t||e)(l(Y),l(Me),l(le),l(He,8))},e.\u0275cmp=b({type:e,selectors:[["ngx-spinner"]],viewQuery:function(t,o){if(t&1&&fe(Ze,5),t&2){let r;ge(r=he())&&(o.spinnerDOM=r.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},standalone:!0,features:[se,v],ngContentSelectors:Ye,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(t,o){t&1&&(me(),M(0,et,6,12,"div",1)),t&2&&m("ngIf",o.spinner.show)},dependencies:[it,xe,Se],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[je("fadeIn",[De("in",D({opacity:1})),Q(":enter",[D({opacity:0}),W(300)]),Q(":leave",W(200,D({opacity:0})))])]},changeDetection:0});let n=e;return n})(),We=(()=>{let e=class e{static forRoot(i){return{ngModule:e,providers:[{provide:He,useValue:i}]}}};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=re({type:e}),e.\u0275inj=ne({imports:[we]});let n=e;return n})();var q=(()=>{let e=class e{constructor(i,t){this.dialogRef=i,this.data=t,this.email="",this.mensaje=t.mensaje}onNoClick(){this.dialogRef.close()}};e.\u0275fac=function(t){return new(t||e)(l(Te),l(Ae))},e.\u0275cmp=b({type:e,selectors:[["app-modal-mensaje"]],standalone:!0,features:[v],decls:14,vars:3,consts:[["mat-dialog-title",""],["appearance","fill"],["matInput","","type","email",3,"ngModelChange","ngModel"],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,o){t&1&&(a(0,"h2",0),u(1,"Registrar"),c(),a(2,"mat-dialog-content")(3,"p"),u(4),c(),a(5,"mat-form-field",1)(6,"mat-label"),u(7,"Correo electr\xF3nico"),c(),a(8,"input",2),O("ngModelChange",function(s){return _(o.data.email,s)||(o.data.email=s),s}),c()()(),a(9,"mat-dialog-actions")(10,"button",3),x("click",function(){return o.onNoClick()}),u(11,"No Gracias"),c(),a(12,"button",4),u(13,"Registrar"),c()()),t&2&&(d(4),ve(o.mensaje),d(4),I("ngModel",o.data.email),d(4),m("mat-dialog-close",o.data.email))},dependencies:[V,Ve,Be,qe,Ue,L,Ee,R,z,E,P,N,F,k,A,T]});let n=e;return n})();var Qe=(()=>{let e=class e{constructor(i){this.http=i,this.baseUrl=B.apiUrl}login(i){let t=`${this.baseUrl}users/${i}`;return this.http.get(t,{})}};e.\u0275fac=function(t){return new(t||e)(C(j))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Xe=(()=>{let e=class e{constructor(i){this.http=i,this.baseUrl=B.apiUrl}register(i){let t=`${this.baseUrl}users`,o={email:i};return this.http.post(t,o)}};e.\u0275fac=function(t){return new(t||e)(C(j))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Zt=(()=>{let e=class e{constructor(i,t,o,r,s,f){this.loginService=i,this.userService=t,this.spinner=o,this.dialog=r,this.snackBar=s,this.router=f,this.email=""}onLogin(){if(!this.email||this.email.trim()===""){this.dialog.open(q,{data:{mensaje:"Se requiere un correo electr\xF3nico"}});return}this.spinner.show(),this.loginService.login(this.email).subscribe({next:i=>{console.log("Respuesta del login:",i);let t=i;this.spinner.hide(),console.log(t),this.router.navigate(["/dashboards"],{queryParams:{email:this.email}})},error:i=>{console.error("Error al hacer login:",i),this.spinner.hide();let t=i.status===404?"Correo no existe, desea registrarlo?":"Error en el servidor, por favor intente m\xE1s tarde.";this.dialog.open(q,{data:{mensaje:t,email:this.email}}).afterClosed().subscribe(r=>{r&&(console.log("Correo ingresado para registro:",r),this.userService.register(r).subscribe({next:s=>{console.log("Registro exitoso:",s),this.snackBar.open("Correo creado exitosamente","Cerrar",{duration:3e3,horizontalPosition:"center",verticalPosition:"top"})},error:s=>{console.error("Error al registrar correo:",s);let f=s.status===400?"Se requiere un correo electr\xF3nico":s.status===409?"El correo ya est\xE1 registrado":"Error inesperado al registrar";this.dialog.open(q,{data:{mensaje:f}})}}))})}})}};e.\u0275fac=function(t){return new(t||e)(l(Qe),l(Xe),l(Y),l(Le),l(ze),l(Oe))},e.\u0275cmp=b({type:e,selectors:[["app-login"]],standalone:!0,features:[v],decls:15,vars:3,consts:[["loginForm","ngForm"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-atom",3,"fullScreen"],[2,"color","white"],[1,"login-container"],[1,"login-form",3,"ngSubmit"],["src","assets/images/logo-atom-chat.png","alt","Logo",1,"login-logo"],["appearance","fill"],["matInput","","type","email","name","email","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login-button",3,"disabled"]],template:function(t,o){if(t&1){let r=de();a(0,"ngx-spinner",1)(1,"p",2),u(2," Buscando... "),c()(),a(3,"div",3)(4,"form",4,0),x("ngSubmit",function(){return H(r),G(o.onLogin())}),y(6,"img",5),a(7,"h2"),u(8,"Inicio de Sesi\xF3n"),c(),a(9,"mat-form-field",6)(10,"mat-label"),u(11,"Correo electr\xF3nico"),c(),a(12,"input",7),O("ngModelChange",function(f){return H(r),_(o.email,f)||(o.email=f),G(f)}),c()(),a(13,"button",8),u(14," Ingresar "),c()()()}if(t&2){let r=be(5);m("fullScreen",!0),d(12),I("ngModel",o.email),d(),m("disabled",!r.valid)}},dependencies:[P,ke,N,F,Ne,Pe,k,Fe,R,z,E,A,T,L,Ie,We,Ge,V,Re],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f2f2f2}.login-form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 12px #0000001a;width:100%;max-width:320px;display:flex;flex-direction:column;gap:1rem;text-align:center}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:#333}.login-logo[_ngcontent-%COMP%]{width:100px;margin:0 auto 1rem;display:block}.login-input[_ngcontent-%COMP%]{padding:.75rem;border-radius:8px;border:1px solid #ccc;font-size:1rem;outline:none;transition:border .3s}.login-input[_ngcontent-%COMP%]:focus{border-color:#007bff}.login-button[_ngcontent-%COMP%]{padding:.75rem;background-color:#007bff;color:#fff;border:none;border-radius:8px;font-weight:700;font-size:1rem;cursor:pointer;transition:background-color .3s}.login-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.login-button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]});let n=e;return n})();export{Zt as LoginComponent};
